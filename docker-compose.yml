services: 
  mlops-api-pf: 
    image: andresmartinezfuentes8/mlops_api 
    container_name: mlops-api-pf
    ports: 
      - "5000:5000" 
    restart: always 
  mlops-web: 
    image: andresmartinezfuentes8/mlops_web 
    container_name: mlops_web 
    ports: 
      - "8501:8501" 
    environment: 
      - API_URL=http://mlops-api-pf:5000/predict 
    depends_on: 
      - mlops-api-pf 
    restart: always
  prometheus: 
    image: prom/prometheus:latest 
    container_name: prometheus 
    volumes: 
      - ./src/prometheus.yaml:/etc/prometheus/prometheus.yml 
    ports: 
      - "9090:9090" 
    restart: unless-stopped
  grafana: 
    image: grafana/grafana:latest 
    container_name: grafana 
    ports: 
      - "3000:3000" 
    environment: 
      - GF_SECURITY_ADMIN_PASSWORD=admin 
    depends_on: 
      - prometheus 
    volumes: 
      - grafana-storage:/var/lib/grafana 
      - ./grafana-provisioning:/etc/grafana/provisioning 
    restart: unless-stopped

volumes: 
 grafana-storage: 